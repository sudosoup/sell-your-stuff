<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Sell Your Stuff</title>
  <script crossorigin src="https://unpkg.com/react@17/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
</head>
<body>
  <div id="app"></div>
  <script>
    const { useState, useEffect } = React;

    function App() {
      const [items, setItems] = useState([]);
      const [form, setForm] = useState({title:'', description:'', condition:'', category:'', location:'', photoUrl:''});

      useEffect(() => {
        fetch('/api/items').then(res => res.json()).then(setItems);
      }, []);

      const handleChange = e => setForm({...form, [e.target.name]: e.target.value});
      const handleSubmit = e => {
        e.preventDefault();
        fetch('/api/items', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(form)
        }).then(res => res.json()).then(item => {
          setItems(items.concat(item));
          setForm({title:'', description:'', condition:'', category:'', location:'', photoUrl:''});
        });
      };

      return React.createElement('div', null,
        React.createElement('h1', null, 'Sell Your Stuff'),
        React.createElement('form', {onSubmit: handleSubmit},
          ['title','description','condition','category','location','photoUrl'].map(field =>
            React.createElement('div', {key: field},
              React.createElement('input', {
                name: field,
                value: form[field],
                onChange: handleChange,
                placeholder: field
              })
            )
          ),
          React.createElement('button', {type: 'submit'}, 'Add Item')
        ),
        React.createElement('ul', null,
          items.map(item => React.createElement('li', {key: item.id}, item.title + ' - ' + item.status))
        )
      );
    }

    ReactDOM.render(React.createElement(App), document.getElementById('app'));
  </script>
</body>
</html>
